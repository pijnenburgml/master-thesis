---
title: "Results"
author: "Marie-Lou Pijnenburg"
date: "2023-07-14"
output:
  html_document: default
---


Map of Shannon index computed from spectral species distribution. Shannon index is computed by looking at window of 10 by 10 pixels (10 meter resolution) of the spectral species map, resulting in pixels size of Shannon index of 100 by 100 meters. The spectral species map used here was generated by a k-mean clustering algorithm with 20 clusters as input, leading to the formation of 20 spectral species.  


```{r, echo=FALSE, message=FALSE}
library(sf)
library(tidyverse)
library(dplyr)
library(terra)
library(tidyterra)
library(stars)
library(raster)
library(remotes)
# remotes::install_github('cran/dissUtils')
library(dissUtils)
# remotes::install_github('jbferet/biodivMapR')
library(biodivMapR)
library(ggplot2)
library(cowplot)
Shannon_map <- rast("~/data/biodivmapR_sent/RESULTS/sent_crop_envi/SPCA/ALPHA/Shannon_10")
viridis_colors <- viridis::plasma(20)
na_col <- grey(0.8, alpha=0.5)
m <- ggplot() +
  geom_spatraster(data = Shannon_map, na.rm = TRUE, aes(fill=Shannon_10))+
  # theme_map()+
  theme_minimal()+
  scale_fill_gradientn(colours = viridis_colors, na.value = na_col) +
  labs(fill = substitute(paste("Shannon index", italic("H'"))))

m+
  ggspatial::annotation_north_arrow(
    location = "bl", which_north = "true",
    pad_x = unit(0.5, "in"), pad_y = unit(0.65, "in"),
    height = unit(0.7, "cm"),
    width = unit(0.7, "cm")
  )+
  ggspatial::annotation_scale(
    location = "bl", pad_x = unit(0.5, "in"),
    pad_y = unit(0.4, "in"), 
    style="ticks"
  )

 
```

True color view of Sentinel-2 data over our area of interest. Pixels size correspond to 10 by 10 meters. 


```{r, echo=FALSE, message=FALSE}
sent_view <- rast("~/data/output/sent_crop_view.tif")
sent_view_scale <-sent_view/7
s <- ggplot() +
  geom_spatraster_rgb(data = sent_view_scale, interpolate=T, r=3, g=2, b=1)+
  # theme_map()+
  theme_minimal()

s+
  ggspatial::annotation_scale(location="bl", pad_x=unit(0.5, "in"),
  pad_y = unit(0.4, "in"), style="ticks", line_col="white", text_col="white")+
  
  ggspatial::annotation_north_arrow(location="bl", which_north=T, pad_x=unit(0, "in"),
  pad_y = unit(0.4, "in"), height = unit(0.6, "cm"), width=unit(0.6, "cm"))


```



















